<!DOCTYPE html>
<html>
<script>
    var connection = new WebSocket('ws://' + location.hostname + ':81/');
    var button_1_status = 0;
    var button_2_status = 0;
    var sens_data = 0;
    connection.onmessage = function (event) {
        var full_data = event.data;
        console.log(full_data);
        var data = JSON.parse(full_data);
        sens_data = data.sens;
        document.getElementById("sensor_meter").value = sens_data;
        document.getElementById("sensor_value").innerHTML = sens_data;
    }
    function button_1_on() {
        button_1_status = 1;
        console.log("LED 1 is ON");
        send_data();
    }
    function button_1_off() {
        button_1_status = 0;
        console.log("LED 1 is OFF");
        send_data();
    }
    function button_2_on() {
        button_2_status = 1;
        console.log("LED 2 is ON");
        send_data();
    }
    function button_2_off() {
        button_2_status = 0;
        console.log("LED 2 is OFF");
        send_data();
    }
    function send_data() {
        var full_data = '{"LED1" :' + button_1_status + ',"LED2":' + button_2_status + '}';
        connection.send(full_data);
    }
</script>

<body>
    <center>
        <h1>My Home Automation</h1>
        <h3> LED 1 </h3>
        <button onclick="button_1_on()">On</button><button onclick="button_1_off()">Off</button>
        <h3> LED 2 </h3>
        <button onclick="button_2_on()">On</button><button onclick="button_2_off()">Off</button>
    </center>
    <div style="text-align: center;">
        <h3>Proximity Sensor</h3><meter value="0" min="0" max="1" id="sensor_meter"> </meter>
        <h3 id="sensor_value" style="display: inline-block;"> 2 </h3>
</body>

</html>